<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Defining Entities | Berry ORM</title>
    <meta name="generator" content="VuePress 1.8.2">
    <meta name="description" content="Object Relational Mapping for front-ends">
    <link rel="preload" href="/berry-orm/assets/css/0.styles.69ca23ae.css" as="style"><link rel="preload" href="/berry-orm/assets/js/app.c2bc2b58.js" as="script"><link rel="preload" href="/berry-orm/assets/js/2.e602c081.js" as="script"><link rel="preload" href="/berry-orm/assets/js/9.41c84b6d.js" as="script"><link rel="prefetch" href="/berry-orm/assets/js/10.af598bfa.js"><link rel="prefetch" href="/berry-orm/assets/js/11.2c42b4e5.js"><link rel="prefetch" href="/berry-orm/assets/js/12.3af0fb13.js"><link rel="prefetch" href="/berry-orm/assets/js/13.7edb5523.js"><link rel="prefetch" href="/berry-orm/assets/js/14.019be9b7.js"><link rel="prefetch" href="/berry-orm/assets/js/15.565fb461.js"><link rel="prefetch" href="/berry-orm/assets/js/16.67d91825.js"><link rel="prefetch" href="/berry-orm/assets/js/17.efdd8cd6.js"><link rel="prefetch" href="/berry-orm/assets/js/18.f3fa0b04.js"><link rel="prefetch" href="/berry-orm/assets/js/19.874413a1.js"><link rel="prefetch" href="/berry-orm/assets/js/20.441ce965.js"><link rel="prefetch" href="/berry-orm/assets/js/21.ef3d23f0.js"><link rel="prefetch" href="/berry-orm/assets/js/22.7015293c.js"><link rel="prefetch" href="/berry-orm/assets/js/3.8580fdcc.js"><link rel="prefetch" href="/berry-orm/assets/js/4.8c15e02b.js"><link rel="prefetch" href="/berry-orm/assets/js/5.d250c593.js"><link rel="prefetch" href="/berry-orm/assets/js/6.740329d2.js"><link rel="prefetch" href="/berry-orm/assets/js/7.7867ee0d.js"><link rel="prefetch" href="/berry-orm/assets/js/8.920680d2.js">
    <link rel="stylesheet" href="/berry-orm/assets/css/0.styles.69ca23ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/berry-orm/en/" class="home-link router-link-active"><!----> <span class="site-name">Berry ORM</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/berry-orm/en/guide/defining-entities.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/berry-orm/zh/guide/defining-entities.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/TheNightmareX/berry-orm" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/berry-orm/en/guide/defining-entities.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/berry-orm/zh/guide/defining-entities.html" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/TheNightmareX/berry-orm" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/berry-orm/en/guide/introduction.html" class="sidebar-link">Introduction</a></li><li><a href="/berry-orm/en/guide/defining-entities.html" aria-current="page" class="active sidebar-link">Defining Entities</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/berry-orm/en/guide/defining-entities.html#defining-entity-classes" class="sidebar-link">Defining Entity Classes</a></li><li class="sidebar-sub-header"><a href="/berry-orm/en/guide/defining-entities.html#defining-entity-fields" class="sidebar-link">Defining Entity Fields</a></li><li class="sidebar-sub-header"><a href="/berry-orm/en/guide/defining-entities.html#accessors-and-methods" class="sidebar-link">Accessors and Methods</a></li><li class="sidebar-sub-header"><a href="/berry-orm/en/guide/defining-entities.html#example" class="sidebar-link">Example</a></li></ul></li><li><a href="/berry-orm/en/guide/constructing-orm.html" class="sidebar-link">Constructing BerryOrm</a></li><li><a href="/berry-orm/en/guide/using-entity-manager.html" class="sidebar-link">Using EntityManager</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/berry-orm/en/guide/using-entity-manager.html#populating-entities" class="sidebar-link">Populating Entities</a></li><li class="sidebar-sub-header"><a href="/berry-orm/en/guide/using-entity-manager.html#population-state-of-entities" class="sidebar-link">Population State of Entities</a></li><li class="sidebar-sub-header"><a href="/berry-orm/en/guide/using-entity-manager.html#populating-a-relation-field-separately" class="sidebar-link">Populating a Relation Field Separately</a></li><li class="sidebar-sub-header"><a href="/berry-orm/en/guide/using-entity-manager.html#exporting-entities" class="sidebar-link">Exporting Entities</a></li></ul></li><li><a href="/berry-orm/en/guide/updating-entities.html" class="sidebar-link">Updating Entities</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/berry-orm/en/guide/updating-entities.html#updating-data" class="sidebar-link">Updating Data</a></li><li class="sidebar-sub-header"><a href="/berry-orm/en/guide/updating-entities.html#updating-relations" class="sidebar-link">Updating Relations</a></li></ul></li><li><a href="/berry-orm/en/guide/using-identity-map-manager.html" class="sidebar-link">Using IdentityMapManager</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/berry-orm/en/guide/using-identity-map-manager.html#clearing-reference-store" class="sidebar-link">Clearing Reference Store</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Advanced</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/berry-orm/en/advanced/serializers.html" class="sidebar-link">Serializers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/berry-orm/en/advanced/serializers.html#using-serializers" class="sidebar-link">Using Serializers</a></li><li class="sidebar-sub-header"><a href="/berry-orm/en/advanced/serializers.html#creating-serializers" class="sidebar-link">Creating Serializers</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="defining-entities"><a href="#defining-entities" class="header-anchor">#</a> Defining Entities</h1> <p>An <strong><em>entity</em></strong> represents a record in the database. You can simply think of an entity as an object with an ID.</p> <p>Berry ORM uses classes and decorators to describe the data structure of entities. All the decorators are strictly typed, which means that the TypeScript compiler will throw an error if you applied the decorators incorrectly.</p> <h2 id="defining-entity-classes"><a href="#defining-entity-classes" class="header-anchor">#</a> Defining Entity Classes</h2> <p>Every entity class should inherit <code>BaseEntity</code> and apply the <code>@Entity()</code> decorator.<br> <code>BaseEntity</code> requires two generic type parameters, the first one is the <strong>instance type</strong> of the entity class, and the second one is the <strong>name of the primary field</strong>.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token decorator"><span class="token at operator">@</span><span class="token function">Entity</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">BaseEntity<span class="token operator">&lt;</span>User<span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>There are usually <strong>circular references</strong> between entities, so it is recommended to define and export entity classes in a <strong>separate</strong> module to avoid possible bugs.<br>
One practice is: <code>src/entities/user.ts</code>, <code>src/entities/profile.ts</code>.</p></div> <h2 id="defining-entity-fields"><a href="#defining-entity-fields" class="header-anchor">#</a> Defining Entity Fields</h2> <h3 id="data-fields"><a href="#data-fields" class="header-anchor">#</a> Data Fields</h3> <p><strong><em>Data fields</em></strong> are the most common fields to store informations, there is no type restriction.</p> <div class="language-ts extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br></div><pre class="language-ts"><code><span class="token decorator"><span class="token at operator">@</span><span class="token function">Field</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
username<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-ts extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br></div><pre class="language-ts"><code><span class="token decorator"><span class="token at operator">@</span><span class="token function">Field</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
joinedAt<span class="token operator">!</span><span class="token operator">:</span> Date<span class="token punctuation">;</span>
</code></pre></div><h3 id="the-primary-key-field"><a href="#the-primary-key-field" class="header-anchor">#</a> The Primary Key Field</h3> <p>Each entity can only have one <strong><em>primary key field</em></strong>, and its type must be assignable to <code>string</code> or <code>number</code>.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <ul><li><code>@Primary()</code> must be applied <strong>after</strong> <code>@Field()</code></li> <li>If <code>@Primary()</code> is applied in multiple fields，only the last one will take effect</li></ul></div> <div class="language-ts extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br></div><pre class="language-ts"><code><span class="token decorator"><span class="token at operator">@</span><span class="token function">Primary</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Field</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
id<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-ts extra-class"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br></div><pre class="language-ts"><code><span class="token decorator"><span class="token at operator">@</span><span class="token function">Primary</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Field</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
uuid<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="to-one-relation-fields"><a href="#to-one-relation-fields" class="header-anchor">#</a> To-One Relation Fields</h3> <p><strong><em>To-One relation fields</em></strong> represent <em>OneToOne</em> or <em>ManyToOne</em> relations, and their types must be assignable to <code>BaseEntity | undefined | null</code>.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Berry ORM does not need to know whether the relation is <em>OneToOne</em> or <em>ManyToOne</em>, because for Berry ORM, they have the same meanings. (The same applies to <a href="#To-Many-Relation-Fields">to-many relation fields</a>)</p></div> <div class="language-ts extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br></div><pre class="language-ts"><code><span class="token comment">// class User</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Relation</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">target</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Profile<span class="token punctuation">,</span>
  inverse<span class="token operator">:</span> <span class="token string">&quot;owner&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Field</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
profile<span class="token operator">?</span><span class="token operator">:</span> Profile<span class="token punctuation">;</span>
</code></pre></div><p>The value of <code>inverse</code> is the field name of the entity on the other side of the relation, which points back to the entity on this side.</p> <div class="language-ts extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br></div><pre class="language-ts"><code><span class="token comment">// class Profile</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Relation</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">target</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> User<span class="token punctuation">,</span>
  inverse<span class="token operator">:</span> <span class="token string">&quot;profile&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Field</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
owner<span class="token operator">?</span><span class="token operator">:</span> User<span class="token punctuation">;</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <ul><li><code>@Relation()</code> must be applied <strong>after</strong> <code>@Field()</code></li> <li>If there is no data to specify the value of the to-one relation field, the value of the field may be <code>undefined</code>. In addition, <a href="/berry-orm/en/guide/updating-entities.html#through-to-one-relation-fields">updating relations through to-one relation fields</a> will also set the value of to-one relation fields to <code>undefined</code> temporarily. Therefore, it is recommended to use the <em>optional mark</em> <code>?</code> instead of <code>!</code> to avoid potential bugs.</li></ul></div> <h3 id="to-many-relation-fields"><a href="#to-many-relation-fields" class="header-anchor">#</a> To-Many Relation Fields</h3> <p><strong><em>To-many relationship fields</em></strong> represent <em>ManyToOne</em> or <em>ManyToMany</em> relations, and their types must be assignable to <code>Collection</code>.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>Collection</code> is a special <code>Set</code>, used to support <a href="/berry-orm/en/guide/updating-entities.html#through-to-many-relation-fields">updating relations through to-many relation fields</a>. Berry ORM will automatically instantiate <code>Collection</code> for you.</p></div> <div class="language-ts extra-class"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-ts"><code><span class="token decorator"><span class="token at operator">@</span><span class="token function">Relation</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">target</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> User<span class="token punctuation">,</span>
  inverse<span class="token operator">:</span> <span class="token string">&quot;friends&quot;</span><span class="token punctuation">,</span>
  multi<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Field</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
friends<span class="token operator">!</span><span class="token operator">:</span> Collection<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="accessors-and-methods"><a href="#accessors-and-methods" class="header-anchor">#</a> Accessors and Methods</h2> <p>Each entity will be an instance of its entity class, therefore, you can define <strong>accessors</strong> and <strong>methods</strong> to separate your logic.</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">get</span> <span class="token function">fullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>firstName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">getSuperiorMembers</span><span class="token punctuation">(</span>user<span class="token operator">:</span> User<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>department<span class="token punctuation">.</span>members<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span>member<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> member<span class="token punctuation">.</span>level <span class="token operator">&gt;</span> user<span class="token punctuation">.</span>level<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>The constructor of entity classes don't support overwrites with incompatible parameters. Please try to avoid overwriting constructors.</p></div> <h2 id="example"><a href="#example" class="header-anchor">#</a> Example</h2> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// src/entities/user.ts</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Entity</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">BaseEntity<span class="token operator">&lt;</span>User<span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Primary</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Field</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  id<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Field</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  username<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Relation</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">target</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Profile<span class="token punctuation">,</span>
    inverse<span class="token operator">:</span> <span class="token string">&quot;owner&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Field</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  profile<span class="token operator">?</span><span class="token operator">:</span> Profile<span class="token punctuation">;</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Relation</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">target</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> User<span class="token punctuation">,</span>
    inverse<span class="token operator">:</span> <span class="token string">&quot;friends&quot;</span><span class="token punctuation">,</span>
    multi<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Field</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  friends<span class="token operator">!</span><span class="token operator">:</span> Collection<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// src/entities/profile.ts</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Entity</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Profile</span> <span class="token keyword">extends</span> <span class="token class-name">BaseEntity<span class="token operator">&lt;</span>Profile<span class="token punctuation">,</span> <span class="token string">&quot;id&quot;</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Primary</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Field</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  id<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Relation</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">target</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> User<span class="token punctuation">,</span>
    inverse<span class="token operator">:</span> <span class="token string">&quot;profile&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Field</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  owner<span class="token operator">?</span><span class="token operator">:</span> User<span class="token punctuation">;</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Field</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  address<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/TheNightmareX/berry-orm/edit/develop/docs/en/guide/defining-entities.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/5/2021, 12:53:49 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/berry-orm/en/guide/introduction.html" class="prev">
        Introduction
      </a></span> <span class="next"><a href="/berry-orm/en/guide/constructing-orm.html">
        Constructing BerryOrm
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/berry-orm/assets/js/app.c2bc2b58.js" defer></script><script src="/berry-orm/assets/js/2.e602c081.js" defer></script><script src="/berry-orm/assets/js/9.41c84b6d.js" defer></script>
  </body>
</html>
